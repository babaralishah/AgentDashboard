<div class="row">
    <div class="col-lg-12 col-sm-12 col-md-2">
        <app-header></app-header>
    </div>
</div>
<div class="row">
    <div class="col-md-2 col-lg-2 col-sm-2">
        <app-dashboard></app-dashboard>
    </div>
    <div class="col-md-9 col-lg-9 col-sm-9">
        <div class="both">
            <h1><b>Assigned Leads Table</b></h1>
            <br>
            <!-- <div>
                <button class="btn btn-primary">Add New</button>
            </div> -->
            <div class="pull-right">
                <div class="card-body row">
                    <div class="col">
                        <input class="form-control" id="myInput" type="text" placeholder="Search topic or keyword">
                    </div>
                    <button onclick="window.print()" class="btn btn-primary">Print</button> &nbsp; &nbsp;
                    <button class="btn btn-primary">Excel</button>
                </div>
            </div>

            <table class="table table-hover">
                <thead>
                    <th scope="col">ID</th>
                    <th scope="col">Purpose</th>
                    <th scope="col">Client Details</th>
                    <th scope="col">Location</th>
                    <th scope="col">Land Area</th>
                    <th scope="col">Client Type</th>
                    <th scope="col">Demand</th>

                    <th scope="col">Assigned History</th>
                    <th scope="col">Assigned To</th>
                    <!-- <th scope="col">Agent Assigned</th> -->
                    <th scope="col">Operations</th>
                </thead>

                <tbody>
                    <!-- <td>
                    <input class="form-control" type="text" [(ngModel)]="search_id" placeholder="Search ID">
                </td>
                <td>
                    <input class="form-control" type="text" [(ngModel)]="search_location" placeholder="Search">
                </td>
                <td>
                    <input class="form-control" type="text" [(ngModel)]="search_area" placeholder="Search">
                </td>
                <td>
                    <input class="form-control" type="text" [(ngModel)]="search_type" placeholder="Search">
                </td>
                <td>
                    <input class="form-control" type="text" [(ngModel)]="search_demand" placeholder="Search">
                </td>
                <td>
                    <input class="form-control" type="text" placeholder="">
                </td>
                <td>
                    <input class="form-control" type="text" placeholder="">
                </td>
                <td>
                    <input class="form-control" type="text" placeholder="">
                </td>
                <td>
                    <input class="form-control" type="text" placeholder="">
                </td>
                <td>
                    <i class="fa fa-search icon"></i>
                </td> -->
                    <tr *ngFor="let user of user | filter: general_search">
                        <!-- | tableFilter05: search_demand | tableFilter04: search_type | tableFilter03: search_area | tableFilter02: search_location | tableFilter: search_id | filter: general_search"> -->
                        <td>{{ user.referenceId }}</td>
                        <td>{{ user.property_purpose }}</td>
                        <td>
                            <b>Name : </b>{{ user.client_name |titlecase }} <br />
                            <b>Phone : </b>{{ user.client_number }}
                        </td>
                        <td>
                            {{ user.city[0]?.city }}<span></span><br /><span class="badge badge-light" *ngFor="let loc of user.location">{{ loc.location }},
              </span>
                        </td>
                        <td *ngIf="user.area == null else elseBlockArea"><b>Max:</b> {{ user.max_area + " - " + user.area_unit}}<br><b>Min:</b> {{ user.min_area + " - " + user.area_unit}}</td>
                        <ng-template #elseBlockArea>
                            <td>{{ user.area + " - " + user.area_unit}}</td>
                        </ng-template>
                        <td>{{ user.client_type | titlecase }}</td>
                        <td *ngIf="user.demand_price == null else elseBlockDemand"><b>Max:</b> {{ user.max_price }}<br><b>Min:</b> {{ user.min_price }}</td>
                        <ng-template #elseBlockDemand>
                            <td>{{ user.demand_price }}</td>
                        </ng-template>

                        <!-- <td>{{ user.beds_number }}</td> -->
                        <td>{{ user.assigned_history}}</td>
                        <td>{{ user.assigned_to}}</td>
                        <td>
                            <i class="fa fa-edit icon"></i
              ><a  role="button"></a>

              <i
                class="fa fa-trash icon" (click)="confirmID(user._id)" 
                data-toggle="modal"
                data-target="#exampleModal1"
              ></i>
                        </td>
                        <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">
                                            Delete Confirmation
                                        </h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                                    </div>
                                    <div class="modal-body">
                                        Are you sure you want to delete it?
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">
                      Close
                    </button>
                                        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="deleteAssignedLead()">
                      Delete
                    </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>